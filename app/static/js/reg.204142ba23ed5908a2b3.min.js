webpackJsonp([26,44],{186:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),i=s(o),a=n(5),r=s(a),c=n(22),d=s(c),l=n(7),u=s(l),f=n(4),p=n(12),m=n(21);t.default={components:{headTop:u.default},data:function(){return{codeTime:0,setinv:"",user_tel:"",username:"",Password:"",Code:"",Password1:"",pid:"",type:"",check_reg_type:"plain",reg_type:{},name_keyword:[],pwd_len:6,pwd_complexity:[]}},computed:(0,d.default)({},(0,m.mapState)({appConfig:function(e){return e.config.appConfig}})),mounted:function(){this.pid=this.$route.query.id?this.$route.query.id:"",this.appConfig.reg&&this.setConfig(this.appConfig.reg)},watch:{appConfig:function(e){this.setConfig(e.reg)}},methods:{checkPhone:function(e){return!!/^1[34578]\d{9}$/.test(e)||(this.$vux.toast.text("手机号码有误，请重填!"),!1)},check_pwd:function(){if(this.Password!=this.Password1)return this.$vux.toast.text("重复密码不一致!"),!1;var e=this;if(this.pwd_len>0&&this.Password.length<this.pwd_len)return this.$vux.toast.text("密码至少"+this.pwd_len+"位数!"),!1;var t="^.*",n="密码必须包含";for(var s in this.pwd_complexity)"number"==e.pwd_complexity[s]?(t+="(?=.*\\d)",n+="数字,"):"upper_case"==e.pwd_complexity[s]?(t+="(?=.*[A-Z])",n+="大写字母,"):"letter"==e.pwd_complexity[s]?(t+="(?=.*[a-z])",n+="小写字母,"):"symbol"==e.pwd_complexity[s]&&(t+="(?=.*[!@#$%^&*? ])",n+="字符");t+=".*$";var o=new RegExp(t).test(e.Password);return!!(o&&this.pwd_complexity.length>0)||(this.$vux.toast.text(n,"middle"),!1)},check_username:function(){if("mobile"==this.check_reg_type)return this.user_tel?!!this.checkPhone():(this.$vux.toast.text("手机号必填!"),!1);if(!this.username)return this.$vux.toast.text("用户名必填!"),!1;if(0==this.name_keyword.length)return!0;var e=!0,t=this;for(var n in this.name_keyword)if(t.username.indexOf(t.name_keyword[n])>-1){t.$vux.toast.text("用户名不能包含["+t.name_keyword[n]+"]关键词"),e=!1;break}return e},setConfig:function(e){var t=e.register_info.split(",");t.length>0&&(this.check_reg_type=t[0]);var n={};for(var s in t)n[t[s]]=!0;this.reg_type=n,0==e.is_register&&(this.$vux.toast.text("未开放注册!"),this.$router.go(-1)),this.name_keyword=e.name_keyword.split(","),this.pwd_len=e.pwd_len,this.pwd_complexity=e.pwd_complexity.split(",")},checkreg:function(e){this.check_reg_type=e},setTime:function(){var e=this;this.codeTime>0&&(this.setinv=setInterval(function(){e.codeTime--,0==e.codeTime&&clearInterval(e.setinv)},1e3))},sendCode:function(){var e=this;return(0,r.default)(i.default.mark(function t(){var n;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.checkPhone()){t.next=2;break}return t.abrupt("return",!1);case 2:return e.$vux.loading.show({text:"正在发送..."}),t.next=5,(0,f.sendSmsRegisterCode)(e.user_tel);case 5:n=t.sent,e.$vux.loading.hide(),1==n.code?(e.codeTime=60,e.setTime()):e.$vux.toast.text(n.msg,"middle");case 8:case"end":return t.stop()}},t,e)}))()},regBtnClick:function(){var e=this;return(0,r.default)(i.default.mark(function t(){var n;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.check_username()){t.next=2;break}return t.abrupt("return",!1);case 2:if(e.check_pwd()){t.next=4;break}return t.abrupt("return",!1);case 4:return e.$vux.loading.show({text:"正在提交..."}),t.next=7,(0,f.register)(e.username,e.user_tel,e.Password,e.Code,"");case 7:if(n=t.sent,e.$vux.loading.hide(),e.$vux.toast.text(n.msg,"middle"),1!=n.code){t.next=14;break}return t.next=13,(0,p.setStore)("token",n.data.token);case 13:setTimeout(function(){e.$router.go(-1)},2e3);case 14:case"end":return t.stop()}},t,e)}))()}},beforeDestroy:function(){this.setinv&&clearInterval(this.setinv)}}},308:function(e,t,n){t=e.exports=n(2)(),t.push([e.id,".reg .vux-tab{background-color:#f5f5f5!important}","",{version:3,sources:["/./src/page/reg/reg.vue"],names:[],mappings:"AACA,cAAc,kCAAmC,CAChD",file:"reg.vue",sourcesContent:["\n.reg .vux-tab{background-color:#f5f5f5 !important\n}\n"],sourceRoot:"webpack://"}])},309:function(e,t,n){t=e.exports=n(2)(),t.push([e.id,".reg .content[data-v-49fd2538]{width:97.2%;padding:1.4rem}.reg .content select[data-v-49fd2538]{background:#f5f5f5}.reg .content option[data-v-49fd2538]{font-size:.1rem}.reg .content .first[data-v-49fd2538]{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;font-size:.3rem}.reg .content .box[data-v-49fd2538]{height:1rem;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;border-bottom:1px solid #ccc}.reg .content .box i[data-v-49fd2538]{font-size:.4rem;margin-right:.2rem;color:#f44}.reg .content .box input[data-v-49fd2538]{line-height:.95rem;background:#f5f5f5}.reg .content .box .send-btn[data-v-49fd2538]{background:#1ba20a;color:#fafafa;font-size:.24rem;padding:.1rem .2rem;border-radius:.1rem}.reg .content .display-box[data-v-49fd2538]{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:center;align-items:center}.reg .content .reg-box[data-v-49fd2538]{text-align:center;padding-top:.5rem;margin-bottom:.5rem}.reg .content .reg-box button[data-v-49fd2538]{font-size:.3rem;color:#fff;height:.7rem;width:100%}","",{version:3,sources:["/./src/page/reg/reg.vue"],names:[],mappings:"AACA,+BAAyD,YAAkB,cAAc,CACxF,AACD,sCAAsC,kBAAkB,CACvD,AACD,sCAAsC,eAAe,CACpD,AACD,sCAA+E,oBAAoB,aAAa,AAA+D,sBAAsB,8BAA8B,eAAe,CACjP,AACD,oCAAoC,YAAY,AAAyC,oBAAoB,aAAa,AAAoD,sBAAsB,mBAAmB,4BAA4B,CAClP,AACD,sCAAsC,gBAAgB,mBAAmB,UAAa,CACrF,AACD,0CAA0C,mBAAmB,kBAAkB,CAC9E,AACD,8CAA8C,mBAAmB,cAAc,iBAAiB,oBAAoB,mBAAmB,CACtI,AACD,4CAAqF,oBAAoB,aAAa,AAA+D,sBAAsB,8BAA8B,AAAoD,sBAAsB,kBAAkB,CACpU,AACD,wCAAwC,kBAAkB,kBAAkB,mBAAmB,CAC9F,AACD,+CAA+C,gBAAgB,WAAW,aAAa,UAAU,CAChG",file:"reg.vue",sourcesContent:["\n.reg .content[data-v-49fd2538]{width:-webkit-calc(97.2%);width:calc(97.2%);padding:1.4rem\n}\n.reg .content select[data-v-49fd2538]{background:#f5f5f5\n}\n.reg .content option[data-v-49fd2538]{font-size:.1rem\n}\n.reg .content .first[data-v-49fd2538]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;font-size:.3rem\n}\n.reg .content .box[data-v-49fd2538]{height:1rem;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;border-bottom:1px solid #ccc\n}\n.reg .content .box i[data-v-49fd2538]{font-size:.4rem;margin-right:.2rem;color:#ff4444\n}\n.reg .content .box input[data-v-49fd2538]{line-height:.95rem;background:#f5f5f5\n}\n.reg .content .box .send-btn[data-v-49fd2538]{background:#1ba20a;color:#fafafa;font-size:.24rem;padding:.1rem .2rem;border-radius:.1rem\n}\n.reg .content .display-box[data-v-49fd2538]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center\n}\n.reg .content .reg-box[data-v-49fd2538]{text-align:center;padding-top:.5rem;margin-bottom:.5rem\n}\n.reg .content .reg-box button[data-v-49fd2538]{font-size:.3rem;color:#fff;height:.7rem;width:100%\n}"],sourceRoot:"webpack://"}])},398:function(e,t,n){var s=n(308);"string"==typeof s&&(s=[[e.id,s,""]]);n(3)(s,{});s.locals&&(e.exports=s.locals)},399:function(e,t,n){var s=n(309);"string"==typeof s&&(s=[[e.id,s,""]]);n(3)(s,{});s.locals&&(e.exports=s.locals)},541:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"reg"},[n("head-top",{attrs:{"go-back":!0,"head-title":"快速注册"}}),e._v(" "),n("div",{staticClass:"content"},[Object.keys(e.reg_type).length>0?n("tab",[e.reg_type.plain?n("tab-item",{attrs:{selected:"plain"===e.check_reg_type},on:{"on-item-click":function(t){e.checkreg("plain")}}},[e._v("账户注册")]):e._e(),e._v(" "),e.reg_type.mobile?n("tab-item",{attrs:{selected:"mobile"===e.check_reg_type},on:{"on-item-click":function(t){e.checkreg("mobile")}}},[e._v("手机号注册")]):e._e()],1):e._e(),e._v(" "),"plain"==e.check_reg_type?n("div",{staticClass:"box"},[n("i",{staticClass:"iconfont icon-tubiao-"}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"text",placeholder:"请输入账号"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}})]):e._e(),e._v(" "),"mobile"==e.check_reg_type?n("div",{staticClass:"box"},[n("i",{staticClass:"iconfont icon-phone_icon"}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.user_tel,expression:"user_tel"}],attrs:{type:"text",placeholder:"请输入手机号"},domProps:{value:e.user_tel},on:{input:function(t){t.target.composing||(e.user_tel=t.target.value)}}})]):e._e(),e._v(" "),"mobile"==e.check_reg_type?n("div",{staticClass:"box",staticStyle:{"justify-content":"space-between"}},[n("div",{staticClass:"rows"},[n("i",{staticClass:"iconfont icon-yanzhengma"}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.Code,expression:"Code"}],staticStyle:{width:"2rem"},attrs:{type:"text",placeholder:"请输入验证码"},domProps:{value:e.Code},on:{input:function(t){t.target.composing||(e.Code=t.target.value)}}})]),e._v(" "),e.codeTime?n("button",{staticClass:"send-btn",staticStyle:{background:"#999"}},[e._v(e._s(e.codeTime)+"秒后重发")]):n("button",{staticClass:"send-btn",on:{click:e.sendCode}},[e._v("发送验证码")])]):e._e(),e._v(" "),n("div",{staticClass:"box"},[n("i",{staticClass:"iconfont icon-42"}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.Password,expression:"Password"}],attrs:{type:"password",placeholder:"请输入密码"},domProps:{value:e.Password},on:{input:function(t){t.target.composing||(e.Password=t.target.value)}}})]),e._v(" "),n("div",{staticClass:"box"},[n("i",{staticClass:"iconfont icon-42"}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.Password1,expression:"Password1"}],attrs:{type:"password",placeholder:"请确认密码"},domProps:{value:e.Password1},on:{input:function(t){t.target.composing||(e.Password1=t.target.value)}}})]),e._v(" "),n("div",{staticClass:"reg-box"},[n("x-button",{attrs:{text:"注册",gradients:["#ff4444","#fbac47"]},nativeOn:{click:function(t){return e.regBtnClick(t)}}})],1)],1)],1)},staticRenderFns:[]}},656:function(e,t,n){n(399),n(398);var s=n(1)(n(186),n(541),"data-v-49fd2538",null);e.exports=s.exports}});